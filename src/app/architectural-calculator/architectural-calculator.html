<div class="calculator-container">
  <div class="calculator-header">
    <h1 class="calculator-title">{{ translate('title') }}</h1>
    <p class="calculator-subtitle">{{ translate('subtitle') }}</p>
    <div class="language-selector">
      <button 
        class="lang-btn" 
        [class.active]="currentLanguage === 'en'"
        (click)="setLanguage('en')">
        {{ translate('langEn') }}
      </button>
      <button 
        class="lang-btn" 
        [class.active]="currentLanguage === 'ru'"
        (click)="setLanguage('ru')">
        {{ translate('langRu') }}
      </button>
      <button 
        class="lang-btn" 
        [class.active]="currentLanguage === 'hy'"
        (click)="setLanguage('hy')">
        {{ translate('langHy') }}
      </button>
    </div>
  </div>

  <div class="calculator-content">
    <!-- Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ñ‚Ğ¸Ğ¿Ğ° ĞºÑ€Ğ¸Ğ²Ğ¾Ğ¹ -->
    <div class="curve-selection">
      <h2>{{ translate('selectCurveType') }}</h2>
      <div class="curve-tabs">
        <button 
          class="curve-tab curve-tab-parabola" 
          [class.active]="selectedCurveType === 'parabola'"
          (click)="selectedCurveType = 'parabola'; onCurveTypeChange()">
          <span class="tab-icon">ğŸŒ‰</span>
          <span class="tab-title">{{ translate('parabola') }}</span>
          <span class="tab-desc">{{ translate('parabolaDesc') }}</span>
        </button>
        
        <button 
          class="curve-tab curve-tab-ellipse" 
          [class.active]="selectedCurveType === 'ellipse'"
          (click)="selectedCurveType = 'ellipse'; onCurveTypeChange()">
          <span class="tab-icon">ğŸ›ï¸</span>
          <span class="tab-title">{{ translate('ellipse') }}</span>
          <span class="tab-desc">{{ translate('ellipseDesc') }}</span>
        </button>
        
        <button 
          class="curve-tab curve-tab-hyperbola" 
          [class.active]="selectedCurveType === 'hyperbola'"
          (click)="selectedCurveType = 'hyperbola'; onCurveTypeChange()">
          <span class="tab-icon">ğŸ—¼</span>
          <span class="tab-title">{{ translate('hyperbola') }}</span>
          <span class="tab-desc">{{ translate('hyperbolaDesc') }}</span>
        </button>
      </div>
      
      <div class="curve-description">
        <p><strong>{{ translate('typicalObjects') }}</strong> {{ getCurveTypeDescription() }}</p>
      </div>
    </div>

    <!-- ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ²Ğ²Ğ¾Ğ´Ğ° -->
    <div class="parameters-section">
      <h2>{{ translate('parameters') }}</h2>
      
      <!-- ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ¿Ğ°Ñ€Ğ°Ğ±Ğ¾Ğ»Ñ‹ -->
      <div *ngIf="selectedCurveType === 'parabola'" class="parameter-group">
        <div class="parameter-item">
          <label for="span">{{ translate('span') }}</label>
          <input 
            type="number" 
            id="span" 
            [(ngModel)]="parabolaParams.span" 
            min="1" 
            max="200"
            step="0.1">
          <span class="parameter-help">{{ translate('spanHelp') }}</span>
        </div>
        
        <div class="parameter-item">
          <label for="height">{{ translate('height') }}</label>
          <input 
            type="number" 
            id="height" 
            [(ngModel)]="parabolaParams.height" 
            min="0.1" 
            max="50"
            step="0.1">
          <span class="parameter-help">{{ translate('heightHelp') }}</span>
        </div>
        
        <div class="parameter-item">
          <label for="thickness">{{ translate('thickness') }}</label>
          <input 
            type="number" 
            id="thickness" 
            [(ngModel)]="parabolaParams.thickness" 
            min="0.01" 
            max="5"
            step="0.01">
          <span class="parameter-help">{{ translate('thicknessHelp') }}</span>
        </div>
      </div>

      <!-- ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ ÑĞ»Ğ»Ğ¸Ğ¿ÑĞ° -->
      <div *ngIf="selectedCurveType === 'ellipse'" class="parameter-group">
        <div class="parameter-item">
          <label for="a">{{ translate('semiMajorAxis') }}</label>
          <input 
            type="number" 
            id="a" 
            [(ngModel)]="ellipseParams.a" 
            min="1" 
            max="100"
            step="0.1">
          <span class="parameter-help">{{ translate('semiMajorAxisHelp') }}</span>
        </div>
        
        <div class="parameter-item">
          <label for="b">{{ translate('semiMinorAxis') }}</label>
          <input 
            type="number" 
            id="b" 
            [(ngModel)]="ellipseParams.b" 
            min="0.1" 
            max="50"
            step="0.1">
          <span class="parameter-help">{{ translate('semiMinorAxisHelp') }}</span>
        </div>
        
        <div class="parameter-item">
          <label for="thickness">{{ translate('thickness') }}</label>
          <input 
            type="number" 
            id="thickness" 
            [(ngModel)]="ellipseParams.thickness" 
            min="0.01" 
            max="5"
            step="0.01">
          <span class="parameter-help">{{ translate('thicknessHelp') }}</span>
        </div>
      </div>

      <!-- ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹ Ğ³Ğ¸Ğ¿ĞµÑ€Ğ±Ğ¾Ğ»Ñ‹ -->
      <div *ngIf="selectedCurveType === 'hyperbola'" class="parameter-group">
        <div class="parameter-item">
          <label for="a">{{ translate('paramA') }}</label>
          <input 
            type="number" 
            id="a" 
            [(ngModel)]="hyperbolaParams.a" 
            min="0.1" 
            max="50"
            step="0.1">
          <span class="parameter-help">{{ translate('paramAHelp') }}</span>
        </div>
        
        <div class="parameter-item">
          <label for="b">{{ translate('paramB') }}</label>
          <input 
            type="number" 
            id="b" 
            [(ngModel)]="hyperbolaParams.b" 
            min="0.1" 
            max="50"
            step="0.1">
          <span class="parameter-help">{{ translate('paramBHelp') }}</span>
        </div>
        
        <div class="parameter-item">
          <label for="thickness">{{ translate('thickness') }}</label>
          <input 
            type="number" 
            id="thickness" 
            [(ngModel)]="hyperbolaParams.thickness" 
            min="0.01" 
            max="5"
            step="0.01">
          <span class="parameter-help">{{ translate('thicknessHelp') }}</span>
        </div>
      </div>
    </div>

    <!-- Ğ’Ñ‹Ğ±Ğ¾Ñ€ Ğ¼Ğ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ğ° -->
    <div class="material-selection">
      <h2>{{ translate('selectMaterial') }}</h2>
      <div class="material-grid">
        <div 
          *ngFor="let material of materials" 
          class="material-card"
          [class.selected]="selectedMaterial?.name === material.name"
          (click)="selectedMaterial = material">
          <div class="material-info">
            <h3>{{ getMaterialName(material.name) }}</h3>
            <p><span class="material-label">{{ translate('density') }}</span> <span class="material-value">{{ material.density }} {{ translate('unitKgPerM3') }}</span></p>
            <p><span class="material-label">{{ translate('cost') }}</span> <span class="material-value">{{ getPriceWithCurrency(material.costPerUnit) }}{{ translate('unitPerM3') }}</span></p>
          </div>
        </div>
      </div>
    </div>

    <!-- ĞšĞ½Ğ¾Ğ¿ĞºĞ¸ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ -->
    <div class="action-buttons">
      <button class="btn-calculate" (click)="calculate()">
        <span class="btn-icon">ğŸ§®</span>
        {{ translate('calculate') }}
      </button>
      
      <button class="btn-reset" (click)="resetCalculation()">
        <span class="btn-icon">ğŸ”„</span>
        {{ translate('reset') }}
      </button>
    </div>

    <!-- Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ -->
    <div *ngIf="showResults && calculationResult" class="results-section">
      <h2>{{ translate('results') }}</h2>
      
      <div class="results-grid">
        <!-- ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ Ğ¸Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ -->
        <div class="result-card equation-card">
          <h3>ğŸ“ {{ translate('equation') }}</h3>
          <div class="equation">{{ calculationResult.equation }}</div>
        </div>

        <!-- Ğ˜Ğ·Ğ¼ĞµÑ€ĞµĞ½Ğ¸Ñ -->
        <div class="result-card measurements-card">
          <h3>ğŸ“ {{ translate('measurements') }}</h3>
          <div class="measurement-item">
            <span class="label">{{ translate('area') }}</span>
            <span class="value">{{ calculationResult.measurements.area | number:'1.2-2' }} {{ translate('unitM2') }}</span>
          </div>
          <div class="measurement-item">
            <span class="label">{{ translate('arcLength') }}</span>
            <span class="value">{{ calculationResult.measurements.arcLength | number:'1.2-2' }} {{ translate('unitM') }}</span>
          </div>
          <div class="measurement-item">
            <span class="label">{{ translate('volume') }}</span>
            <span class="value">{{ calculationResult.measurements.volume | number:'1.2-2' }} {{ translate('unitM3') }}</span>
          </div>
        </div>

        <!-- ĞœĞ°Ñ‚ĞµÑ€Ğ¸Ğ°Ğ»Ñ‹ -->
        <div class="result-card materials-card">
          <h3>ğŸ—ï¸ {{ translate('materials') }}</h3>
          <div class="material-item">
            <span class="label">{{ translate('material') }}</span>
            <span class="value">{{ getMaterialName(calculationResult.materialEstimate.material.name) }}</span>
          </div>
          <div class="material-item">
            <span class="label">{{ translate('quantity') }}</span>
            <span class="value">{{ calculationResult.materialEstimate.quantity | number:'1.2-2' }} {{ translate('unitM3') }}</span>
          </div>
          <div class="material-item">
            <span class="label">{{ translate('weight') }}</span>
            <span class="value">{{ calculationResult.materialEstimate.weight | number:'1.0-0' }} {{ translate('unitKg') }}</span>
          </div>
          <div class="material-item">
            <span class="label">{{ translate('totalCost') }}</span>
            <span class="value">{{ getPriceWithCurrency(calculationResult.materialEstimate.totalCost) }}</span>
          </div>
        </div>

        <!-- Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° -->
        <div class="result-card properties-card">
          <h3>ğŸ” {{ translate('properties') }}</h3>
          <div *ngIf="calculationResult.properties.foci" class="property-item">
            <span class="label">{{ translate('foci') }}</span>
            <div class="foci-list">
              <div *ngFor="let focus of calculationResult.properties.foci">
                ({{ focus.x | number:'1.2-2' }}, {{ focus.y | number:'1.2-2' }})
              </div>
            </div>
          </div>
          <div *ngIf="calculationResult.properties.eccentricity" class="property-item">
            <span class="label">{{ translate('eccentricity') }}</span>
            <span class="value">{{ calculationResult.properties.eccentricity | number:'1.3-3' }}</span>
          </div>
          <div *ngIf="calculationResult.properties.asymptotes" class="property-item">
            <span class="label">{{ translate('asymptotes') }}</span>
            <div class="asymptotes-list">
              <div *ngFor="let asymptote of calculationResult.properties.asymptotes">
                {{ asymptote }}
              </div>
            </div>
          </div>
        </div>

        <!-- Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ½Ñ‹Ğ¹ Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ· -->
        <div *ngIf="structuralAnalysis" class="result-card structural-card">
          <h3>ğŸ—ï¸ {{ translate('structuralAnalysis') }}</h3>
          <div class="analysis-item">
            <span class="label">{{ translate('maxStress') }}</span>
            <span class="value">{{ structuralAnalysis.maxStress | number:'1.2-2' }} {{ translate('unitMPa') }}</span>
          </div>
          <div class="analysis-item">
            <span class="label">{{ translate('safetyFactor') }}</span>
            <span class="value" [class.safe]="structuralAnalysis.safetyFactor >= 2" [class.warning]="structuralAnalysis.safetyFactor < 2">
              {{ structuralAnalysis.safetyFactor | number:'1.2-2' }}
            </span>
          </div>
          <div class="analysis-item">
            <span class="label">{{ translate('deflection') }}</span>
            <span class="value">{{ structuralAnalysis.deflection | number:'1.2-2' }} {{ translate('unitMm') }}</span>
          </div>
          <div class="analysis-item">
            <span class="label">{{ translate('bucklingLoad') }}</span>
            <span class="value">{{ structuralAnalysis.bucklingLoad | number:'1.0-0' }} {{ translate('unitKN') }}</span>
          </div>
          <div class="analysis-item">
            <span class="label">{{ translate('naturalFrequency') }}</span>
            <span class="value">{{ structuralAnalysis.naturalFrequency | number:'1.2-2' }} {{ translate('unitHz') }}</span>
          </div>
        </div>
      </div>

      <!-- Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸ -->
      <div *ngIf="recommendations && recommendations.length > 0" class="recommendations-section">
        <h3>ğŸ’¡ {{ translate('recommendations') }}</h3>
        
        <div class="recommendations-list">
          <div *ngFor="let rec of recommendations" class="recommendation-card" 
               [style.border-left-color]="getSeverityColor(rec.severity)">
            <div class="recommendation-header">
              <span class="recommendation-icon">{{ getRecommendationIcon(rec.type) }}</span>
              <h4 class="recommendation-title">{{ rec.title }}</h4>
              <span class="recommendation-severity" [style.color]="getSeverityColor(rec.severity)">
                {{ getSeverityText(rec.severity) }}
              </span>
            </div>
            
            <div class="recommendation-body">
              <p class="recommendation-description">{{ rec.description }}</p>
              
              <div *ngIf="rec.currentValue !== undefined" class="recommendation-values">
                <div class="value-item">
                  <span class="label">{{ translate('currentValue') }}</span>
                  <span class="value">{{ rec.currentValue | number:'1.2-2' }}</span>
                </div>
                <div *ngIf="rec.recommendedValue" class="value-item">
                  <span class="label">{{ translate('recommended') }}</span>
                  <span class="value recommended">{{ rec.recommendedValue | number:'1.2-2' }}</span>
                </div>
              </div>
              
              <div *ngIf="rec.suggestion" class="recommendation-suggestion">
                <strong>ğŸ’¬ {{ translate('recommendation') }}</strong> {{ rec.suggestion }}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Ğ­ĞºÑĞ¿Ğ¾Ñ€Ñ‚ -->
      <div class="export-section">
        <h3>ğŸ’¾ {{ translate('export') }}</h3>
        <div class="export-buttons">
          <button class="btn-export" (click)="exportResults('json')">
            <span class="btn-icon">ğŸ“„</span>
            JSON
          </button>
          <button class="btn-export" (click)="exportResults('pdf')">
            <span class="btn-icon">ğŸ“‹</span>
            PDF
          </button>
          <button class="btn-export" (click)="exportResults('excel')">
            <span class="btn-icon">ğŸ“Š</span>
            Excel
          </button>
          <button class="btn-export" (click)="exportResults('word')">
            <span class="btn-icon">ğŸ“</span>
            Word
          </button>
        </div>
      </div>
    </div>
  </div>
</div>